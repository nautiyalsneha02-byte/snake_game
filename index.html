<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Snake Game — HTML, JS & Bootstrap</title>
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: linear-gradient(180deg,#0f172a,#071033); color: #fff; }
    .game-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); }
    canvas { background: #0b1220; display: block; width: 100%; height: auto; border-radius: 8px; }
    .controls .btn { min-width: 56px; }
    .touch-controls { display:flex; gap:.5rem; justify-content:center; }
    @media (max-width:576px){ .desktop-only { display:none !important; } }
  </style>
</head>
<script type="text/javascript">
	atOptions = {
		'key' : '3f6d256efd598bcf57b6245c2f6541ae',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/3f6d256efd598bcf57b6245c2f6541ae/invoke.js"></script>
<body>
  <div class="container py-4">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-6">
        <div class="card game-card shadow-sm p-3">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <h4 class="mb-0">Snake Game</h4>
            <div>
              <span class="me-3">Score: <strong id="score">0</strong></span>
              <span>High: <strong id="highscore">0</strong></span>
            </div>
          </div>

          <canvas id="gameCanvas" width="400" height="400"></canvas>

          <div class="mt-3 d-flex gap-2 flex-wrap align-items-center">
            <button id="startBtn" class="btn btn-success">Start</button>
            <button id="pauseBtn" class="btn btn-warning">Pause</button>
            <button id="resetBtn" class="btn btn-danger">Reset</button>

            <label class="ms-auto mb-0">Speed:
              <select id="speedSelect" class="form-select form-select-sm d-inline-block" style="width:110px;">
                <option value="8">Slow</option>
                <option value="12" selected>Normal</option>
                <option value="16">Fast</option>
                <option value="24">Very Fast</option>
              </select>
            </label>
          </div>

          <div class="mt-3 desktop-only">
            <small class="text-muted">Controls: Arrow keys or WASD. Pause with P.</small>
          </div>

          <div class="mt-3">
            <div class="touch-controls d-md-none">
              <div class="w-100 d-flex justify-content-center">
                <div class="btn-group-vertical">
                  <button class="btn btn-outline-light" data-dir="up">▲</button>
                  <div class="d-flex">
                    <button class="btn btn-outline-light" data-dir="left">◀</button>
                    <button class="btn btn-outline-light" data-dir="right">▶</button>
                  </div>
                  <button class="btn btn-outline-light mt-1" data-dir="down">▼</button>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-3">
            <p class="mb-0 text-muted">Tip: Eat the food (bright square) to grow. Don't hit walls or yourself.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Basic snake game implemented in one file.
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    // Grid size (number of cells on one axis)
    let gridCount = 20; // will be adapted to canvas size

    function fitCanvas() {
      // Make the canvas square and responsive based on container width
      const containerWidth = canvas.parentElement.clientWidth;
      const size = Math.min(containerWidth - 0, 560); // max size
      canvas.width = size;
      canvas.height = size;
      // ensure gridCount divides nicely — keep it constant; cellSize computed dynamically
    }

    window.addEventListener('resize', () => {
      fitCanvas();
      draw();
    });

    fitCanvas();

    // Game state
    let snake = [{x:10,y:10}];
    let dir = {x:0,y:0};
    let nextDir = {x:0,y:0};
    let food = {x:5,y:5};
    let score = 0;
    let highscore = Number(localStorage.getItem('snake_high') || 0);
    document.getElementById('highscore').innerText = highscore;

    let running = false;
    let intervalId = null;
    let speed = Number(document.getElementById('speedSelect').value); // ticks per second

    function cellSize(){ return canvas.width / gridCount; }

    function randomCell() {
      return {
        x: Math.floor(Math.random() * gridCount),
        y: Math.floor(Math.random() * gridCount)
      };
    }

    function placeFood(){
      let f;
      while(true){
        f = randomCell();
        // don't place on snake
        if(!snake.some(seg => seg.x === f.x && seg.y === f.y)) break;
      }
      food = f;
    }

    function resetGame(){
      snake = [{x: Math.floor(gridCount/2), y: Math.floor(gridCount/2)}];
      dir = {x:0,y:0};
      nextDir = {x:0,y:0};
      score = 0;
      document.getElementById('score').innerText = score;
      placeFood();
      stop();
      draw();
    }

    function start(){
      if(running) return;
      running = true;
      speed = Number(document.getElementById('speedSelect').value);
      const ms = Math.round(1000 / speed);
      intervalId = setInterval(tick, ms);
    }

    function stop(){
      running = false;
      if(intervalId) clearInterval(intervalId);
      intervalId = null;
    }

    function togglePause(){
      if(running) stop(); else start();
    }

    function tick(){
      // update direction (prevent reverse)
      if((nextDir.x === -dir.x && nextDir.y === -dir.y)) {
        // ignore reverse
      } else {
        dir = Object.assign({}, nextDir);
      }

      if(dir.x === 0 && dir.y === 0) { draw(); return; }

      // compute new head
      const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };

      // wall collision
      if(head.x < 0 || head.x >= gridCount || head.y < 0 || head.y >= gridCount) {
        gameOver(); return;
      }

      // self collision
      if(snake.some(seg => seg.x === head.x && seg.y === head.y)) { gameOver(); return; }

      snake.unshift(head);

      // food?
      if(head.x === food.x && head.y === food.y){
        score += 1;
        document.getElementById('score').innerText = score;
        if(score > highscore){
          highscore = score; localStorage.setItem('snake_high', highscore);
          document.getElementById('highscore').innerText = highscore;
        }
        placeFood();
      } else {
        snake.pop(); // move forward
      }

      draw();
    }

    function gameOver(){
      stop();
      alert('Game Over\nScore: ' + score);
      resetGame();
    }

    function draw(){
      const cs = cellSize();
      // clear
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // draw grid (subtle)
      ctx.strokeStyle = 'rgba(255,255,255,0.03)';
      ctx.lineWidth = 1;
      for(let i=0;i<=gridCount;i++){
        const pos = i*cs;
        ctx.beginPath(); ctx.moveTo(pos,0); ctx.lineTo(pos,canvas.height); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0,pos); ctx.lineTo(canvas.width,pos); ctx.stroke();
      }

      // draw food
      ctx.fillStyle = '#ff4d4f';
      ctx.fillRect(food.x*cs + 1, food.y*cs + 1, cs - 2, cs - 2);

      // draw snake
      for(let i=0;i<snake.length;i++){
        const s = snake[i];
        if(i===0){
          // head gradient
          ctx.fillStyle = '#7ef9a3';
        } else {
          ctx.fillStyle = '#19a974';
        }
        ctx.fillRect(s.x*cs + 1, s.y*cs + 1, cs - 2, cs - 2);
      }
    }

    // keyboard controls
    window.addEventListener('keydown', (e)=>{
      const k = e.key;
      if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight','w','a','s','d','W','A','S','D'].includes(k)){
        e.preventDefault();
      }
      if(k === 'ArrowUp' || k === 'w' || k === 'W') nextDir = {x:0,y:-1};
      if(k === 'ArrowDown' || k === 's' || k === 'S') nextDir = {x:0,y:1};
      if(k === 'ArrowLeft' || k === 'a' || k === 'A') nextDir = {x:-1,y:0};
      if(k === 'ArrowRight' || k === 'd' || k === 'D') nextDir = {x:1,y:0};
      if(k === 'p' || k === 'P') togglePause();
    });

    // touch buttons
    document.querySelectorAll('[data-dir]').forEach(btn => {
      btn.addEventListener('click', ()=>{
        const d = btn.getAttribute('data-dir');
        if(d==='up') nextDir = {x:0,y:-1};
        if(d==='down') nextDir = {x:0,y:1};
        if(d==='left') nextDir = {x:-1,y:0};
        if(d==='right') nextDir = {x:1,y:0};
        // start if not running
        start();
      });
    });

    // Buttons
    document.getElementById('startBtn').addEventListener('click', ()=>{ start(); });
    document.getElementById('pauseBtn').addEventListener('click', ()=>{ togglePause(); });
    document.getElementById('resetBtn').addEventListener('click', ()=>{ resetGame(); });
    document.getElementById('speedSelect').addEventListener('change', ()=>{
      const wasRunning = running;
      stop();
      speed = Number(document.getElementById('speedSelect').value);
      if(wasRunning) start();
    });

    // initialize
    placeFood();
    draw();

    // ensure canvas fits on load
    window.addEventListener('load', ()=>{ fitCanvas(); draw(); });
  </script>
	<script type='text/javascript' src='//pl27766270.revenuecpmgate.com/5f/27/71/5f2771559e29946326b0a6dda009db7c.js'></script>
	<script type="text/javascript">
	atOptions = {
		'key' : '3f6d256efd598bcf57b6245c2f6541ae',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/3f6d256efd598bcf57b6245c2f6541ae/invoke.js"></script>
</body>
</html>



